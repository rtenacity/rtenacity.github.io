<!DOCTYPE html>
<html lang="en" dir=" auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>First Lego League | rohanarni.com</title>
<meta name="keywords" content="">
<meta name="description" content="The Mindstorms Ev3 Robot is a robot made by Lego. So obviously, there are competitions involving this robot. I participated in two of them. How did it go? Let’s find out.
Let’s establish some context. My friend invited me to a robotics competition that his dad coached in summer of 2019. It was called First Lego League. It was all about making the Mindstorms Robot move around on this mat and do tasks on the mat, called missions. This is what the mat looked like:">
<meta name="author" content="Rohan Arni">
<link rel="canonical" href="http://localhost:1313/posts/first-lego-league/fll/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.1cf6fbdbc3148f9ba6f6431621c28cfe4a5c7dff305cc1132deab8fbbd12ea54.css" integrity="sha256-HPb728MUj5um9kMWIcKM/kpcff8wXMETLeq4&#43;70S6lQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/first-lego-league/fll/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="
    top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    
    <nav class="nav">
        <div class="logo">
            <a href="/">rohanarni.com</a>
                    <div class="logo-switches">
                        <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                            <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                            </svg>
                            <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <circle cx="12" cy="12" r="5"></circle>
                                <line x1="12" y1="1" x2="12" y2="3"></line>
                                <line x1="12" y1="21" x2="12" y2="23"></line>
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                <line x1="1" y1="12" x2="3" y2="12"></line>
                                <line x1="21" y1="12" x2="23" y2="12"></line>
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                            </svg>
                        </button>
                        <ul class="lang-switch"><li>|</li>
                        </ul>
                    </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/newsletter/" title="Newsletter">
                    <span>Newsletter</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header><main class="main">

<article class="post-single">
    <header class="top" class="post-header">
        
        <h1 class="post-title">
            First Lego League
        </h1>
        <div class="post-meta"><span title='2021-02-28 00:00:00 +0000 UTC'>February 28, 2021</span>&nbsp;·&nbsp;Rohan Arni

</div>
    </header> 
    <div class="post-content"><p>The Mindstorms Ev3 Robot is a robot made by Lego. So obviously, there are competitions involving this robot. I participated in two of them. How did it go? Let’s find out.</p>
<p>Let’s establish some context. My friend invited me to a robotics competition that his dad coached in summer of 2019. It was called First Lego League. It was all about making the Mindstorms Robot move around on this mat and do tasks on the mat, called missions. This is what the mat looked like:</p>

<center><figure>
    <img loading="lazy" src="/img/fll.webp"/> <figcaption>
            FLL Mat
        </figcaption>
</figure>
</center>

<p>As you can see, there are little Lego structures scattered around the mat that the robot must go to and complete missions there. Missions award you points. There are three rounds. The round with the highest points counts. At the end of the he top three teams make it to the next round.</p>
<p>In the 2019–2020 competition, we used something called RobotC to control the Ev3. It was a version of C that the Ev3 understands. Crappy program, always crashed, but it got the job done.</p>
<p>In the 2020–2021 competition however, everything changed. We used something called Ev3Dev, which is a Linux distro for the Ev3. That way, we could use python to control the robot. However, the bootup time for the program is very high. So we used the buttons on the robot to run programs. The way it worked is that you have a main execute script, which links to files that contain the code for all missions. It also connects to a script which processes the button inputs. Here is a diagram showing the way out setup worked:</p>

<center><figure>
    <img loading="lazy" src="/img/fll2.webp"/> <figcaption>
            Diagram
        </figcaption>
</figure>
</center>

<p>So this is all the software design. Let’s look at the hardware:</p>


<iframe src="https://player.vimeo.com/video/517806926" width="640" height="360" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>


<p>Pretty neat, right? Now, let’s look at the software design.</p>
<p>This is the launcher code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/env python3</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> ev3dev2.motor <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> ev3dev2.sensor.lego <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> ev3dev2.button <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> ev3dev2.wheel <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> ev3dev2.sound <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> library
</span></span><span style="display:flex;"><span>steering <span style="color:#f92672">=</span> MoveSteering(OUTPUT_C, OUTPUT_B)
</span></span><span style="display:flex;"><span>motor <span style="color:#f92672">=</span> MediumMotor()
</span></span><span style="display:flex;"><span>tank <span style="color:#f92672">=</span> MoveTank(OUTPUT_B, OUTPUT_C)
</span></span><span style="display:flex;"><span>STUD_MM <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span>mdiff <span style="color:#f92672">=</span> MoveDifferential(OUTPUT_B, OUTPUT_C, EV3Tire, <span style="color:#ae81ff">16</span> <span style="color:#f92672">*</span> STUD_MM)
</span></span><span style="display:flex;"><span>tank<span style="color:#f92672">.</span>gyro <span style="color:#f92672">=</span> GyroSensor()
</span></span><span style="display:flex;"><span>mdiff<span style="color:#f92672">.</span>gyro <span style="color:#f92672">=</span> GyroSensor()
</span></span><span style="display:flex;"><span>btn <span style="color:#f92672">=</span> Button()
</span></span><span style="display:flex;"><span>sound <span style="color:#f92672">=</span> Sound()
</span></span><span style="display:flex;"><span>sound<span style="color:#f92672">.</span>play_tone(<span style="color:#ae81ff">880</span>, <span style="color:#ae81ff">0.25</span>)
</span></span><span style="display:flex;"><span>sound<span style="color:#f92672">.</span>play_tone(<span style="color:#ae81ff">440</span>, <span style="color:#ae81ff">0.25</span>)
</span></span><span style="display:flex;"><span>library<span style="color:#f92672">.</span>choice(tank, SpeedPercent, follow_for_ms, motor, mdiff, steering,btn, sound)
</span></span></code></pre></div><p>This program is fairly simple. It has standard imports, some typical definitions for the robot to run, and then it invokes the choice function from the library. The choice function is the main function that runs the robot. It is defined in the library.py file. Here is the code for the library.py file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> bench
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> dance
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> bottom_right
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> step_slide
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> stepper
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> slide
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> input
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> treadmil
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> treadmil_gate
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">choice</span>(tank, SpeedPercent, follow_for_ms, motor, mdiff, steering, btn, sound):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#960050;background-color:#1e0010">“</span>ready <span style="color:#66d9ef">for</span> next command<span style="color:#960050;background-color:#1e0010">”</span>)
</span></span><span style="display:flex;"><span>        functionNumber <span style="color:#f92672">=</span> input<span style="color:#f92672">.</span>readKeys(btn, sound)
</span></span><span style="display:flex;"><span>        print(functionNumber)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> functionNumber <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            bench<span style="color:#f92672">.</span>go(tank)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elif</span> functionNumber <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>            stepper<span style="color:#f92672">.</span>go(tank, SpeedPercent, follow_for_ms, motor, mdiff)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elif</span> functionNumber <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>:
</span></span><span style="display:flex;"><span>            treadmil_gate<span style="color:#f92672">.</span>go(tank, SpeedPercent, follow_for_ms, motor, mdiff)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elif</span> functionNumber <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            dance<span style="color:#f92672">.</span>dance_now(tank, steering)
</span></span></code></pre></div><p>The choice function is a launcher for a program that we wrote to complete a mission. We used the buttons on the robot to define the variable <code>functionNumber</code>. Depending on the buttons that we pressed, the functionNumber would be different. This may seem extraneous, but this solves a major issue that ev3dev presents. If we were to do this normally and have a different program for each mission, the bootup time would be too long. So we used this launcher to invoke the function for each mission. <!-- raw HTML omitted --> Let’s take a look at the code for one of the missions:</p>
<p>The goal is to push a green tab into the purple-and-black box.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> time <span style="color:#f92672">import</span> sleep
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">go</span>(tank, SpeedPercent, follow_for_ms, motor, mdiff):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#forward fast 63cm</span>
</span></span><span style="display:flex;"><span>    tank<span style="color:#f92672">.</span>on_for_rotations(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">5.0</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#forward slow 20cm</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">33</span>):
</span></span><span style="display:flex;"><span>    tank<span style="color:#f92672">.</span>on_for_rotations(<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">0.05</span>)
</span></span><span style="display:flex;"><span>    sleep(<span style="color:#ae81ff">0.03</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#backward fast 32cm</span>
</span></span><span style="display:flex;"><span>tank<span style="color:#f92672">.</span>on_for_rotations(<span style="color:#f92672">-</span><span style="color:#ae81ff">50</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">10</span>)
</span></span></code></pre></div><p>No imports, as you can see. There is no need for them, as library.py has the imports.</p>
<p>So this whole thing is a function that library invokes. First, the robot uses the tank function, which controls the robot’s wheels as a tank. It goes forward for 5 rotations, which is 63 cm. That takes us close to the stepper contraption. We go slower for 20 cm to push the stepper in using the tank function. Then we back out of there super fast to save time, coming back to the home base.</p>
<p>Thanks for reading!</p>
<pre tabindex="0"><code>print(&#34;End of file.&#34;)
</code></pre><p><em>Note from the author: This article was written in 2021 on my old blog on medium. I am reposting it here for archival purposes. This article has been modified to fit the new blog.</em></p>
<hr>


        <br>
    </div>

    <center> <script async src="https://eocampaign1.com/form/1559edaa-677c-11f0-bbd4-eb13bbfcc584.js" data-form="1559edaa-677c-11f0-bbd4-eb13bbfcc584"></script></center>


    <footer class="post-footer" class="bottom">
        <ul class="post-tags">
        </ul>
    </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 <a href="http://localhost:1313/">rohanarni.com</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script></body>

</html>